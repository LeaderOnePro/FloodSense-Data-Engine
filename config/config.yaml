# FloodSense Data Engine Configuration

# Crawler settings
crawler:
  max_workers: 4
  timeout: 30
  retry_count: 3
  retry_delay: 1.0
  user_agents:
    - "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
    - "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
    - "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"

# Processor settings
processor:
  target_resolution: [1920, 1080]  # 1080p
  min_resolution: [480, 360]       # 360p minimum (relaxed)
  blur_threshold: 100.0             # Laplacian variance threshold
  scene_threshold: 30.0             # Scene change detection threshold
  phash_threshold: 8                # pHash hamming distance for deduplication

# Synthesizer settings
synthesizer:
  api_key: null                     # Set via FLOODSENSE_API_KEY environment variable
  model: "gemini-3-pro-image-preview"
  max_retries: 5
  retry_delay: 2.0
  batch_size: 10

# Data directories
data:
  raw_dir: "data/raw"
  processed_dir: "data/processed"
  synthetic_dir: "data/synthetic"
  checkpoint_dir: "data/.checkpoints"

# Proxy settings
proxy:
  enabled: false
  http: null
  https: null
  rotation_enabled: false
  proxy_list: []

# Logging settings
logging:
  level: "INFO"
  log_dir: "logs"
  rotation: "10 MB"
  retention: "7 days"

# Validator settings
validator:
  enabled: true
  enable_heuristic: true
  enable_clip: true
  clip_threshold: 0.25
  clip_model: "openai/clip-vit-base-patch32"
  device: null  # auto-detect (cuda/cpu)
  batch_size: 32

# API image sources
api_sources:
  unsplash:
    enabled: true
    api_key: null          # Set via FLOODSENSE_UNSPLASH_API_KEY environment variable
    rate_limit: 50         # 50 requests per hour (free tier)
    priority: 1
  pexels:
    enabled: true
    api_key: null          # Set via FLOODSENSE_PEXELS_API_KEY environment variable
    rate_limit: 200        # 200 requests per hour
    priority: 2
  nasa:
    enabled: true
    api_key: null          # No API key needed
    rate_limit: 0          # No formal rate limit (be respectful)
    priority: 3
  wikimedia:
    enabled: true
    api_key: null          # No API key needed
    rate_limit: 0          # No formal rate limit (be respectful)
    priority: 4
  flickr:
    enabled: true
    api_key: null          # Set via FLOODSENSE_FLICKR_API_KEY environment variable
    rate_limit: 3600       # 3600 requests per hour
    priority: 5